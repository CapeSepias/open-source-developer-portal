<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Funding source verification | Dwolla API</title><meta name=description content="Verify Customer funding sources using Instant Account Verification or micro-deposits to start sending and receiving payments by utilizing our open API with no per transaction fees."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.43cb.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300,400,600,700"><script src=/js/head-scripts.32fa.js></script><script src=https://cdn.statuspage.io/se-v2.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href=https://www.dwolla.com class="logo icon-logo-dwolla-white">Dwolla</a><div class=hamburger><a href=http://dwolla.com/register>Sign up</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href=https://www.dwolla.com/about>Product</a> <a href="/">API</a> <a href="https://www.dwolla.com/contact?b=nav">Contact sales</a> <a href=http://dwolla.com/login>Log in</a> <a class="btn primary" href=http://dwolla.com/register>Sign up</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href="/guides/">Guides</a> <a href="/resources/" class=active>Resources</a> <a href="https://docsv2.dwolla.com/">API docs</a> <a href=/pages/sdks.html class="no-nav js-two-col-no-toggle">SDKs</a><div class="custom-select custom-select--blue"><select name=select class=language_select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--blue"><select class=language_select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav"><section id=js-sidenav-dropdown class=side-nav__dropdown><h6>Choose a guide</h6><div class=picker id=js-sidenav-dropdown-button><button>Please select a guide</button><div class="icon icon-side-nav-collapse-plus"></div><div class="icon icon-side-nav-collapse-minus"></div></div><nav id=js-sidenav-dropdown-nav><a href="/guides/sandbox-setup/">Set up Sandbox</a> <a href="/guides/send-money/">Send money to your users</a> <a href="/guides/receive-money/">Receive money from your users</a> <a href="/guides/transfer-money-between-users/">Transfer money between users</a> <a href="/guides/webhooks/">Webhooks</a></nav></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/send-money>Overview: Send money to your users</a><div class=dot></div><ol><li><a href=/guides/send-money/01-white-label-onboarding.html>Option 1: White label</a><div class=dot></div></li><li><a href=/guides/send-money/01-direct-onboarding.html>Option 2: Dwolla Direct</a><div class=dot></div></li></ol></li><li><a href=/guides/send-money/02-fetch-funding-sources.html>Fetch funding sources</a><div class=dot></div></li><li><a href=/guides/send-money/03-create-transfer.html>Create a transfer</a><div class=dot></div></li><li><a href=/guides/send-money/04-check-transfer.html>Check transfer status</a><div class=dot></div></li></ol></section><!-- <section class="side-nav__options" style="display:none">
    <h6>Options</h6>
    <ul>
        <li class="external-link"><a href="https://developers.dwolla.com/dev/pages/guides/masspay" target="_blank"><span class="icon-sidenav-option">MassPay V1</span></a></li>
        <li class="external-link"><a href=""><span class="icon-sidenav-option">Recurring and Scheduled V1</span></a></li>
    </ul>
</section> --><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/receive-money>Overview</a><div class=dot></div><ol><li><a href=/guides/receive-money/01-white-label-onboarding.html>Option 1: White label</a><div class=dot></div></li><li><a href=/guides/receive-money/01-direct-onboarding.html>Option 2: Dwolla Direct</a><div class=dot></div></li></ol></li><li><a href=/guides/receive-money/02-check-transfer.html>Check transfer status</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/sandbox-setup>Overview: Sandbox setup</a><div class=dot></div></li><li><a href=/guides/sandbox-setup/01-create-sandbox-account.html>Create a Sandbox account</a><div class=dot></div></li><li><a href=/guides/sandbox-setup/02-create-application.html>Create an application</a><div class=dot></div></li><li><a href=/guides/sandbox-setup/03-enable-sdk-sandbox-mode.html>Enable Sandbox mode</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/webhooks>Overview: Webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/01-obtain-authorization.html>Obtain authorization</a><div class=dot></div></li><li><a href=/guides/webhooks/02-create-subscription.html>Create a webhook subscription</a><div class=dot></div></li><li><a href=/guides/webhooks/03-validating-webhooks.html>Validating webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/04-process-webhooks.html>Processing webhooks</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/transfer-money-between-users>Overview: transfer money between your users</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/01-access-token.html>Generate an access token</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/02-create-verified-customer.html>Create a verified customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/03-attach-unverified-bank.html>Attach an unverified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/04-create-unverified-customer.html>Create an unverified Customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/05-attach-verified-bank.html>Attach a verified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/06-create-transfer.html>Create a transfer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/07-check-transfer.html>Check the status of your transfer</a><div class=dot></div></li></ol></section></nav><nav class="side-nav js-side-nav active"><section><h6>Tools</h6><ul><li><a href=/resources/sandbox-console.html>Sandbox Console</a></li><li class=external-link><a href=http://dwolla-token.herokuapp.com target=_blank><span class=icon-sidenav-option>Token generator</span></a></li><li><a href=/resources/changelog.html>Change log</a></li><li class=external-link><a href="http://status.dwolla.com/" target=_blank><span class=icon-sidenav-option>Status</span></a></li></ul><h6>Articles</h6><ul><li><a href=/resources/account-types.html>Account types</a></li><li><a href=/resources/customer-verification.html>Customer verification</a></li><li><a href=/resources/dwolla.js.html>Dwolla.js</a></li><li><a href=/resources/funding-source-verification.html class=active>Funding source verification</a></li><li><a href=/resources/oauth-refresh-strategies.html>OAuth refresh stategies</a></li><li><a href=/resources/transfer-workflow.html>Transfer workflow</a></li></ul></section></nav><nav class="side-nav js-side-nav"><section id=js-sidenav-dropdown class=side-nav__dropdown><ul><li><a href=https://docsv2.dwolla.com/#introduction>Introduction</a></li><li><a href=https://docsv2.dwolla.com/#oauth>OAuth</a></li><li><a href=https://docsv2.dwolla.com/#customers>Customers</a></li><li><a href=https://docsv2.dwolla.com/#documents>Documents</a></li><li><a href=https://docsv2.dwolla.com/#sources>Funding Sources</a></li><li><a href=https://docsv2.dwolla.com/#transfers>Transfers</a></li><li><a href=https://docsv2.dwolla.com/#events>Events</a></li><li><a href=https://docsv2.dwolla.com/#subscriptions>Webhook Subscriptions</a></li><li><a href=https://docsv2.dwolla.com/#webhooks>Webhooks</a></li></ul></section></nav></section><section class=cnt-two-col__content><h1>Funding source verification</h1><p>Before a Dwolla account or white label Customer is eligible to transfer money from their bank or credit union account they need to verify ownership of the account, either via Instant Account Verification (IAV) or micro-deposits. This article demonstrates how to verify a bank or credit union account using either of these options. <strong>Please note:</strong> IAV is a premium feature only available for white label Customers. For more information about white label and IAV, please <a href=https://www.dwolla.com/contact>contact sales</a>.</p><p>In this article we use the example of verifying a white label Customer&rsquo;s bank account and detail the interaction between Dwolla, your application, and the white label Customer.</p><h2>Micro-deposit verification</h2><p>If you choose to verify using micro-deposits, Dwolla will transfer two deposits of less than $0.10 to the Customer&rsquo;s linked bank or credit union account. After <a href=#initiate-micro-deposits>initiating micro-deposits</a>, these two random amounts should post to the Customer’s bank account in 1-2 business days. Once the Customer sees these deposits in their account, they need to verify the two deposit amounts in your application. If subscribed to <a href=/guides/webhooks>webhooks</a>, your application will be notified throughout this process with the triggered events of <code>customer_microdeposits_added</code> and either <code>customer_microdeposits_completed</code> or <code>customer_microdeposits_failed</code>.</p><h3>Get the funding source</h3><p>Once the Customer has <a href=http://docsv2.dwolla.com/#new-funding-source-customer>added the bank account</a> you need to retrieve the funding source and follow the link to <code>initiate-micro-deposits</code>. A link to <code>initiate micro-deposits</code> will appear when an unverified <code>bank</code> is eligible to receive micro-deposits.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>GET https://api.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c
Accept: application/vnd.dwolla.v1.hal+json
Authorization: Bearer pBA9fVDBEyYZCEsLf/wKehyh1RTpzjUj5KzIRfDi0wKTii7DqY

...

{
  "_links": {
    "self": {
      "href": "https://api.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c"
    },
    "customer": {
      "href": "https://api.dwolla.com/customers/36e9dcb2-889b-4873-8e52-0c9404ea002a"
    },
    "initiate-micro-deposits": {
      "href": "https://api.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c/micro-deposits"
    }
  },
  "id": "692486f8-29f6-4516-a6a5-c69fd2ce854c",
  "status": "unverified",
  "type": "bank",
  "name": "Test checking account",
  "created": "2015-10-23T20:37:57.137Z"
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=n>fund_source</span> <span class=o>=</span> <span class=s1>'https://api.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c'</span>

<span class=n>retrieved</span> <span class=o>=</span> <span class=no>DwollaSwagger</span><span class=o>::</span><span class=no>FundingsourcesApi</span><span class=p>.</span><span class=nf>id</span><span class=p>(</span><span class=n>fund_source</span><span class=p>)</span>
<span class=nb>p</span> <span class=n>retrieved</span><span class=p>.</span><span class=nf>name</span> <span class=c1># =&gt; "Test checking account"</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=nv>$fund_source</span> <span class=o>=</span> <span class=s1>'https://api.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c'</span><span class=p>;</span>

<span class=nv>$fsApi</span> <span class=o>=</span> <span class=nx>DwollaSwagger\FundingsourcesApi</span><span class=p>(</span><span class=nv>$apiClient</span><span class=p>);</span>

<span class=nv>$retrieved</span> <span class=o>=</span> <span class=nv>$fsApi</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>(</span><span class=nv>$fund_source</span><span class=p>);</span>
<span class=k>print</span><span class=p>(</span><span class=nv>$retrieved</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>);</span> <span class=c1># =&gt; "Test checking account"
</span><span class=cp>?&gt;</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>fund_source</span> <span class=o>=</span> <span class=s>'https://api.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c'</span>

<span class=n>fs_api</span> <span class=o>=</span> <span class=n>dwollaswagger</span><span class=o>.</span><span class=n>FundingsourcesApi</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
<span class=n>retrieved</span> <span class=o>=</span> <span class=n>fs_api</span><span class=o>.</span><span class=nb>id</span><span class=p>(</span><span class=n>fund_source</span><span class=p>)</span>

<span class=k>print</span><span class=p>(</span><span class=n>retrieved</span><span class=o>.</span><span class=n>name</span><span class=p>)</span> <span class=c># =&gt; Test checking account</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=c1>// coming soon</span>
</code></pre></div></div><h3>Initiate micro-deposits</h3><p>After you follow the link to <code>initiate-micro-deposits</code> Dwolla will trigger two micro-deposits. The <code>retrieved</code> variable from the previous step holds the location of the Customer&rsquo;s Funding Source and is passed over to the <code>micro_deposits()</code> function. If the request is successful, Dwolla returns a <code>HTTP 201</code> and a link to the resource <code>fundingsources/{id}/micro-deposits</code> in the location header, which can be later used to verify micro-deposit amounts. If your application is subscribed to webhooks, a webhook will be sent with the event topic of <code>customer-micro-deposits-added</code>, notifying your application that micro-deposits are en route to the Customer’s bank account.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>POST https://api-uat.dwolla.com//funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits
Authorization: Bearer 8tJjM7iTjujLthkbVPMUcHLqMNw4uv5kG712g9j1RRBHplGpwo
Content-Type: application/vnd.dwolla.v1.hal+json
Accept: application/vnd.dwolla.v1.hal+json
Cache-Control: no-cache

HTTP/1.1 201 Created
Location: https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=no>DwollaSwagger</span><span class=o>::</span><span class=no>FundingsourcesApi</span><span class=p>.</span><span class=nf>micro_deposits</span><span class=p>(</span><span class=n>retrieved</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=c1>// coming soon</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>fs_api</span> <span class=o>=</span> <span class=n>dwollaswagger</span><span class=o>.</span><span class=n>FundingsourcesApi</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
<span class=n>fs_api</span><span class=o>.</span><span class=n>micro_deposits</span><span class=p>(</span><span class=n>retrieved</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=nv>$fsApi</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DwollaSwagger\FundingsourcesApi</span><span class=p>(</span><span class=nv>$apiClient</span><span class=p>);</span>
<span class=nv>$fsApi</span><span class=o>-&gt;</span><span class=na>micro_deposits</span><span class=p>(</span><span class=nv>$retrieved</span><span class=p>);</span>
<span class=cp>?&gt;</span>
</code></pre></div></div><h3>Verify micro-deposits</h3><p>In the Dwolla production environment, you must wait until the micro-deposits actually post to the Customer’s bank account before the account can be verified, which can take 1-2 business days. However, in the Sandbox environment, any amount <strong>below</strong> $0.10 will allow you to verify the account immediately. This operation is successful unless an exception is thrown:</p><p><code>amount1</code>: <code>0.03</code></p><p><code>amount2</code>: <code>0.09</code></p><p><strong>Note:</strong> Each bank account allows two attempts to enter the correct verification amounts. After two failed attempts, the bank account will be automatically removed and the process must be restarted by having the Customer <a href=http://docsv2.dwolla.com/#new-funding-source-customer>re-add</a> their bank account. You can only initiate one set of micro-deposits at a time to a bank account.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>POST /funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits 
Authorization: Bearer 8tJjM7iTjujLthkbVPMUcHLqMNw4uv5kG712g9j1RRBHplGpwo
Content-Type: application/vnd.dwolla.v1.hal+json
Accept: application/vnd.dwolla.v1.hal+json

{
    "amount1": {
        "value": "0.03",
        "currency": "USD"
    },
    "amount2": {
        "value": "0.09",
        "currency": "USD"
    }
}

HTTP/1.1 200 OK
{
  "_links": {
    "self": {
      "href": "https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits"
    }
  }
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=no>DwollaSwagger</span><span class=o>::</span><span class=no>FundingsourcesApi</span><span class=p>.</span><span class=nf>verify_micro_deposits_exist</span><span class=p>(</span><span class=n>retrieved</span><span class=p>,</span> <span class=p>{</span>
    <span class=s2>"amount1"</span> <span class=o>=&gt;</span> <span class=p>{</span>
           <span class=s2>"value"</span> <span class=o>=&gt;</span> <span class=s2>"0.03"</span><span class=p>,</span>
        <span class=s2>"currency"</span> <span class=o>=&gt;</span> <span class=s2>"USD"</span>
    <span class=p>},</span>
    <span class=s2>"amount2"</span> <span class=o>=&gt;</span> <span class=p>{</span>
           <span class=s2>"value"</span> <span class=o>=&gt;</span> <span class=s2>"0.09"</span><span class=p>,</span>
        <span class=s2>"currency"</span> <span class=o>=&gt;</span> <span class=s2>"USD"</span>
    <span class=p>}</span>
<span class=p>})</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=c1>// coming soon.</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>fs_api</span> <span class=o>=</span> <span class=n>dwollaswagger</span><span class=o>.</span><span class=n>FundingsourcesApi</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>

<span class=n>fs_api</span><span class=o>.</span><span class=n>verify_micro_deposits_exist</span><span class=p>(</span><span class=n>retrieved</span><span class=p>,</span> <span class=p>{</span>
    <span class=s>"amount1"</span><span class=p>:</span> <span class=p>{</span>
        <span class=s>"value"</span><span class=p>:</span> <span class=s>"0.03"</span><span class=p>,</span>
        <span class=s>"currency"</span><span class=p>:</span> <span class=s>"USD"</span>
    <span class=p>},</span>
    <span class=s>"amount2"</span><span class=p>:</span> <span class=p>{</span>
        <span class=s>"value"</span><span class=p>:</span> <span class=s>"0.09"</span><span class=p>,</span>
        <span class=s>"currency"</span><span class=p>:</span> <span class=s>"USD"</span>
    <span class=p>}</span>
<span class=p>})</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=nv>$fsApi</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DwollaSwagger\FundingsourcesApi</span><span class=p>(</span><span class=nv>$apiClient</span><span class=p>);</span>

<span class=nv>$fsApi</span><span class=o>-&gt;</span><span class=na>verify_micro_deposits_exist</span><span class=p>(</span><span class=nv>$retrieved</span><span class=p>,</span> <span class=k>array</span> <span class=p>(</span>
  <span class=s1>'amount1'</span> <span class=o>=&gt;</span> 
  <span class=k>array</span> <span class=p>(</span>
    <span class=s1>'value'</span> <span class=o>=&gt;</span> <span class=s1>'0.03'</span><span class=p>,</span>
    <span class=s1>'currency'</span> <span class=o>=&gt;</span> <span class=s1>'USD'</span><span class=p>,</span>
  <span class=p>),</span>
  <span class=s1>'amount2'</span> <span class=o>=&gt;</span> 
  <span class=k>array</span> <span class=p>(</span>
    <span class=s1>'value'</span> <span class=o>=&gt;</span> <span class=s1>'0.09'</span><span class=p>,</span>
    <span class=s1>'currency'</span> <span class=o>=&gt;</span> <span class=s1>'USD'</span><span class=p>,</span>
  <span class=p>),</span>
<span class=p>));</span>
<span class=cp>?&gt;</span>
</code></pre></div></div><h2>Instant account verification (IAV)</h2><p>Instant Account Verification (IAV) gives you the ability to add and verify a Customer&rsquo;s bank account in a matter of seconds, which is much faster than the multiple days required for micro-deposits to transfer and then be verified by the Customer. Your application will utilize the client-side <code>dwolla.js</code> JavaScript library to render the IAV flow within a container in your application.</p><h3>Generate a single-use IAV token for a Customer</h3><p>To initiate the IAV flow, dwolla.js requires a single-use IAV token for a Customer. Your server initiates a POST request to Dwolla, specifying for which Customer you want to add/verify a bank account. Dwolla will respond with a non-expiring single-use <code>token</code>. This IAV token will be sent to the client and used to authenticate the HTTP request asking Dwolla to render the IAV flow.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>curl -X POST 
\ -H "Content-Type: application/vnd.dwolla.v1.hal+json"
\ -H "Accept: application/vnd.dwolla.v1.hal+json"
\ -H "Authorization: Bearer qe634nV7dIYpYDf3VGZPciziPU2BCboUZ7G7EG8XEyGswKkBV5"
\ "https://api.dwolla.com/customers/06B51D56-7A6C-4535-A0CC-2C0106F56BA6/iav-token"

HTTP/1.1 200 OK
{  
   "_links":{  
      "self":{  
         "href":"https://api.dwolla.com/customers/06b51d56-7a6c-4535-a0cc-2c0106f56ba6/iav-token"
      }
   },
   "token":"lr0Ax1zwIpeXXt8sJDiVXjPbwEeGO6QKFWBIaKvnFG0Sm2j7vL"
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=c1># coming soon</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=c1>// coming soon</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=c># coming soon</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>// coming soon
</code></pre></div></div><h3>Include dwolla.js and add container for IAV</h3><p>We&rsquo;ll begin the client-side implementation by including dwolla.js in the HEAD of our HTML page. Notice, we are utilizing development version 1 of dwolla.js, alternatively you can include the minified version of <code>&lt;script src=&quot;https://cdn.dwolla.com/1/dwolla.min.js&quot;&gt;&lt;/script&gt;</code>.</p><div class="code-snippet js-code-snippet language-nohide"><button class="btn alternative">copy</button><div class="code-snippet__cnt highlight"><pre><code class=language-nohide data-lang=nohide>&lt;head&gt;
&lt;script src="https://cdn.dwolla.com/1/dwolla.js"&gt;&lt;/script&gt;
&lt;/head&gt;
</code></pre></div></div><p>Next, add the container to the body of the page where you want to render the IAV flow. Note: This container is responsive, meaning content is resized appropriately across all screen resolutions and devices.</p><div class="code-snippet js-code-snippet language-nohide"><button class="btn alternative">copy</button><div class="code-snippet__cnt highlight"><pre><code class=language-nohide data-lang=nohide>&lt;div id="mainContainer"&gt;
    &lt;input type="button" id="start" value="Add Bank"&gt;
&lt;/div&gt;  

&lt;div id="iavContainer"&gt;&lt;/div&gt;
</code></pre></div></div><h3>Configure and call JavaScript function to start IAV</h3><p>Now that you have initialized dwolla.js on your page you can configure and create the function that will call <code>dwolla.iav.start()</code>. For simplicity of this example, use jQuery and call the function to start IAV when the Customer clicks the &ldquo;Add Bank&rdquo; button on your page. To test IAV in the sandbox environment you will use the <code>dwolla.configure</code> helper function and pass in the value of <code>uat</code>. As you can see below, <code>dwolla.iav.start</code> takes three arguments: the iavContainer element where IAV will render, a string value of the single-use IAV token, and a callback function that will handle any error or response.</p><div class="code-snippet js-code-snippet language-nohide"><button class="btn alternative">copy</button><div class="code-snippet__cnt highlight"><pre><code class=language-nohide data-lang=nohide>&lt;script type="text/javascript"&gt;
$('#start').click(function() {
  var iavToken = '4adF858jPeQ9RnojMHdqSD2KwsvmhO7Ti7cI5woOiBGCpH5krY';
  dwolla.configure('uat');
  dwolla.iav.start('iavContainer', iavToken, function(err, res) {
    console.log('Error: ' + JSON.stringify(err) + ' -- Response: ' + JSON.stringify(res));
  });
});
&lt;/script&gt;
</code></pre></div></div><p>In order to facilitate testing IAV in the Sandbox, we allow you to specify any value in the IAV text field inputs to proceed through the flow.</p><h3>Handle the error or response</h3><p>The callback function (err, res) allows you to determine if there is an error with the request (i.e. <code>InvalidIavToken</code>) or if the response was successful.</p><ul><li>If there is an error: generate a new IAV token and re-attempt the IAV flow.<ul><li>Example: <code>{code: &quot;InvalidIavToken&quot;, message: &quot;Invalid IAV token.&quot; }</code></li></ul></li><li>If successful: You will receive a JSON response that includes a link to the newly created and verified funding source. You can then pass this value to either initiate a transfer or store the created resource in your database to be used later.<ul><li>Example: <code>{&quot;_links&quot;:{&quot;funding-source&quot;:{&quot;href&quot;:&quot;https://api-uat.dwolla.com/funding-sources/80275e83-1f9d-4bf7-8816-2ddcd5ffc197&quot;}}}</code></li></ul></li></ul></section></div></div></div><section class=big-disclaimer><div class=page-wrap><h5>Financial institutions play an important role in the Dwolla network.</h5><p>Dwolla, Inc. is an agent of Veridian Credit Union and Compass Bank and all funds associated with your account in the Dwolla network are held in pooled accounts at Veridian Credit Union and Compass Bank. These funds are not eligible for individual insurance, including FDIC insurance and may not be eligible for share insurance by the National Credit Union Share Insurance Fund. Dwolla, Inc. is the operator of a software platform that communicates user instructions for funds transfers to Veridian Credit Union and Compass Bank.</p></div></section><footer><div class=page-wrap><nav><a href="https://www.dwolla.com/pricing?b=footer">Pricing</a> <a href="https://www.dwolla.com/contact?b=footer">Contact sales</a> <a href="http://help.dwolla.com/">Support</a> <a href=https://www.dwolla.com/security>Security</a> <a href="http://blog.dwolla.com/">Blog</a> <a href="http://press.dwolla.com/">Press</a> <a href=https://www.dwolla.com/careers>Careers</a></nav><nav class=disclaimer><span>© 2015 Dwolla, Inc</span> <a href="https://legal.dwolla.com/privacy/">Privacy</a> <a href="https://legal.dwolla.com/tos/">Legal</a> <a href="https://legal.dwolla.com/about-our-financial-institution-partner/">Dwolla, Inc. is an agent of its Financial Institution Partner(s)</a></nav></div></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.4f63.js></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-30404064-1');ga('send','pageview');</script></body></html>